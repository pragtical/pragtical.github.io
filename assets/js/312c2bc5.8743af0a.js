/*! For license information please see 312c2bc5.8743af0a.js.LICENSE.txt */
"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5397],{1264:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var a=i(7294),n=i(6010),r=i(5096),s=i(3787),l=i.n(s),o=i(637);class u{constructor(e){this.plugins=[],this.plugins_icon="/img/plugin.svg",this.featured_plugins=["autoinsert","bracketmatch","editorconfig","ephemeral_tabs","lsp","selectionhighlight"],this.page_plugins=document.querySelector(e.page_plugins),this.page_info=document.querySelector(e.page_info),this.query=document.querySelector(e.query),this.submit=document.querySelector(e.submit),this.results=document.querySelector(e.results),this.text=e.text;var t=this;this.query.addEventListener("keypress",(function(e){"Enter"==e.key&&t.search()})),this.submit.addEventListener("click",(function(){t.search()})),fetch("https://raw.githubusercontent.com/pragtical/plugins/master/manifest.json").then((e=>e.json())).then((e=>this.plugins=e)).then((()=>{window.location.search?this.loadPath(window.location.search):this.render()})),l().setOption("openLinksInNewWindow",!0),l().setFlavor("github"),this.md_converter=new(l().Converter),this.shown_plugin=null,window.addEventListener("popstate",(function(){t.loadPath(window.location.search)}))}set featured(e){this.featured_plugins=e}set defaultPluginIcon(e){this.plugins_icon=e}render(){if(!this.query||!this.submit||!this.results)return!1;this.renderFeatured(),this.renderRandom(),this.renderLanguages()}renderPlugin(e){var t=document.createElement("div");t.className="plugin";var i=e.icon||this.plugins_icon,a="pragtical";if(e.remote){var n=document.createElement("a");n.href=e.remote;var r=n.pathname.match("/([^\\/]+)/");r&&r.length>0&&(a=r[1])}var s="v"+e.version;t.innerHTML='<div class="icon"><img src="'+i+'" /></div><div class="title">'+(e.name||e.id)+'</div><div class="info"><div class="author">'+a+'</div><div class="version">'+s+"</div></div>";var l=this;return t.addEventListener("click",(function(){l.showPluginInfo(e)})),t}renderSection(e,t){var i=document.createElement("h2");i.innerText=e,this.results.append(i);var a=document.createElement("div");a.className="container";var n=t();for(var r in n)a.append(this.renderPlugin(n[r]));this.results.append(a)}renderFeatured(){var e=this;this.renderSection(this.text.featured,(function(){var t=[];for(var i in e.featured_plugins){var a=e.getItem(e.featured_plugins[i]);a&&(a.name||e.setPluginName(a),t.push(a))}return t}))}renderRandom(){var e=this;this.renderSection(this.text.fortune,(function(){return e.getRandom(e.plugins.addons,null,/^language_/)}))}renderLanguages(){var e=this;this.renderSection(this.text.languages,(function(){var t=[];for(var i in e.plugins.addons){var a=e.plugins.addons[i];a.id.match(/^language_/)&&((a=Object.assign({},e.plugins.addons[i])).name=a.id.split(/[_\-]/).splice(1),t.push(a))}return e.getRandom(t)}))}getRawURL(e,t,i,a){return"github"==a?"https://raw.githubusercontent.com"+e+"/"+i+"/"+t:"gitlab"==a?"https://gitlab.com"+e+"/-/raw/"+i+"/"+t:""}getURL(e,t,i,a){return"github"==a?"https://github.com"+e+"/blob/"+i+"/"+t:"gitlab"==a?"https://gitlab.com"+e+"/-/blob/"+i+"/"+t:""}getTreeURL(e,t,i){return"github"==i?"https://github.com"+e+"/tree/"+t:"gitlab"==i?"https://gitlab.com"+e+"/-/tree/"+t:""}changePath(e){var t=window.location.pathname,i="?";for(var a in e)i+=a+"="+encodeURI(e[a])+"&";i=i.replace(/&$/,""),window.location.search!=i&&window.history.pushState(null,null,t+i)}loadPath(e){if(this.hidePluginInfo(),e&&""!=e){e=e.substring(1);var t=JSON.parse('{"'+e.replace(/&/g,'","').replace(/\=/g,'":"')+'"}',(function(e,t){return""===e?t:decodeURIComponent(t)}));t.plugin?this.showPluginInfo(this.getItem(t.plugin)):t.q&&(this.query.value=t.q,this.search())}else this.query.value="",this.search()}fetchReadme(e,t,i,a,n){var r=this;setTimeout((async function(){var s=["master","main"];a&&(s=[a]);var l=["README.md","readme.md"];for(var u in s){var c=!1;for(var h in l){var d=r.getRawURL(e,n+l[h],s[u],i),g=await fetch(d);if(g.ok){var p=await g.text();p=(p=r.md_converter.makeHtml(p)).replace(/<\s*script[^>]*>[\w\s\d\p]*<\s*\/\s*script\s*>/gi,"").replace(/<\s*script[^>]*>/gi,"").replace(/on[\w]+\s*=\s*"[^"]*"/gi,""),t.innerHTML=p;var m=t.querySelectorAll("img");for(var v in m){var f=m[v];f.getAttribute&&!f.getAttribute("src").match(/https?:/)&&(f.src=r.getRawURL(e,n+f.getAttribute("src"),s[u],i))}var b=t.querySelectorAll("a");for(var v in b){var w=b[v];w.getAttribute&&!w.getAttribute("href").match(/https?:/)&&(w.href=r.getURL(e,n+w.getAttribute("href"),s[u],i))}o.Z.highlightAll(),c=!0;break}}if(c)break}}),0)}fetchPluginAsReadme(e,t,i,a,n){var r=this;setTimeout((async function(){var s=["master","main"];for(var l in a&&(s=[a]),s){var u=r.getRawURL(e,n,s[l],i),c=await fetch(u);if(c.ok){var h=await c.text();h=r.md_converter.makeHtml("```lua\n"+h+"\n```"),t.innerHTML=h;var d=document.createElement("div");d.className="download button";var g=document.createElement("a");g.innerHTML='<svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" /></svg>'+r.text.download,g.href=r.getRawURL(e,n,s[l],i),d.append(g);var p=document.querySelector(".plugin-details");p.append(d),p.insertBefore(d,t),o.Z.highlightAll();break}}}),0)}hidePluginInfo(e){e?e.remove():this.shown_plugin&&(this.shown_plugin.remove(),this.shown_plugin=null),document.title="Pragtical - "+this.text.plugins,this.page_plugins.style.display="block"}showPluginInfo(e){var t=e.icon||this.plugins_icon,i="pragtical",a="",n="",r="",s="",l="",o=null;if(e.remote){var u=document.createElement("a");u.href=e.remote,a=u.pathname.replace(/:.+$/,"");var c=u.pathname.match(/:(.+)$/);c&&(o=c[1]),r=(n=u.protocol+"//"+u.host+a).replace(/^https?:\/\//,"");var h=u.pathname.match("/([^/]+)/");h&&h.length>0&&(i=h[1]),(h=u.host.match(/(github|gitlab)\.com/))&&(s=h[1])}else e.path&&(n=this.getURL("/pragtical/plugins",e.path,"master","github"),r="plugins/"+e.path,e.path.match(/\.lua$/)||(s="github",a="/pragtical/plugins",l=e.path+"/"));var d="v"+e.version,g="",p=document.createElement("div");p.className="plugin-details";var m=document.createElement("div");m.className="readme markdown-body",""!=s?(this.fetchReadme(a,m,s,o,l),e.remote&&(g='href="'+this.getTreeURL(a,o,s)+'"')):e.path&&!e.remote&&(o=o||"master",this.fetchPluginAsReadme("/pragtical/plugins",m,"github",o,e.path),g='href="'+this.getURL("/pragtical/plugins",e.path,o,"github")+'"'),p.innerHTML='<div class="details"><div class="icon"><img src="'+t+'" /></div><div class="info"><div class="title">'+(e.name||e.id)+'</div><div class="subinfo"><div class="author">'+i+'</div><div class="version"><a target="_blank" '+g+">"+d+'</a></div><div class="url"><a target="_blank" href="'+n+'">'+r+'</a></div></div><div class="description">'+this.md_converter.makeHtml(e.description)+"</div><div><strong>"+this.text.installation+':</strong></div><div class="install"><div class="command">ppm install '+e.id+"</div></div></div></div>";var v=document.createElement("button");v.className="copy",v.innerText=this.text.copy,v.addEventListener("click",(function(){navigator.clipboard.writeText(document.querySelector(".plugin-details .command").textContent)})),p.querySelector(".plugin-details .install").append(v),p.append(m),this.hidePluginInfo(),this.shown_plugin=p,this.page_plugins.style.display="none",this.page_info.append(p),document.title="Pragtical - "+(e.name||e.id)+" "+this.text.plugin,this.changePath({plugin:e.id})}match(e,t){e=e.toLowerCase();var i=0;for(var a in t){var n=e.match(t[a]);n&&(i+=n.length)}return i}search(){if(""!=this.query.value.trim()){var e=this.query.value.trim();this.changePath({q:e});var t=(e=e.toLowerCase()).split(/\s+/),i=[];for(var a in this.plugins.addons){var n=this.plugins.addons[a];n.search_score=0;var r=!1,s=0;n.name?(s=this.match(n.name,t),n.search_score+=50*s):(s=this.match(n.id,t),n.search_score+=50*s),s>t.length-1&&(r=!0),n.description&&(s=this.match(n.description,t),n.search_score+=10*s,!r&&s>t.length-1&&(r=!0)),r&&(n.name||this.setPluginName(n),i.push(n))}this.results.innerHTML="",this.renderSection(this.text.results+": "+i.length,(function(){return i.sort((function(e,t){return e.search_score==t.search_score?0:e.search_score>t.search_score?-1:1}))}))}else this.results.innerHTML="",this.render()}getRandom(e,t,i){t=t||12;for(var a=e.length,n={},r=0;r<t;r++){var s=Math.floor(Math.random()*a)+1;for(s--;n[s]||!e[s]||i&&e[s].id.match(i);)s=Math.floor(Math.random()*a)+1;n[s]=e[s],n[s].name||this.setPluginName(n[s])}return n}setPluginName(e){e.name||(e.name=e.id.replace(/[_\-]/g," "))}getItem(e){for(var t in this.plugins.addons)if(this.plugins.addons[t].id==e||this.plugins.addons[t].name==e)return this.plugins.addons[t];return null}}function c(){return(0,a.useEffect)((()=>{new u({page_plugins:"#page-plugins",page_info:"#page-plugin-info",query:"#plugins .query",submit:"#plugins .submit",results:"#plugins .results",text:{featured:"Featured",fortune:"Wheel of Fortune",languages:"Languages",installation:"Installation",copy:"COPY",plugin:"plugin",plugins:"plugins",results:"Results Found",download:"Download"}})}),[]),a.createElement("div",{className:"container"},a.createElement("page",{id:"page-plugins"},a.createElement("div",{id:"plugins"},a.createElement("div",{className:"search"},a.createElement("input",{className:"query",type:"text",placeholder:"Search Pragtical Plugins",autofocus:!0}),a.createElement("button",{className:"submit"},"Search")),a.createElement("div",{className:"results"}))),a.createElement("page",{id:"page-plugin-info"}))}var h=i(1207);function d(){return a.createElement("header",{className:(0,n.Z)("hero hero--primary-dark",h.Z.heroBanner)},a.createElement("div",{className:"container"},a.createElement("h1",{className:"hero__title"},"Plugins for Pragtical")))}function g(){return a.createElement(r.Z,{title:"Plugins",description:"Plugins for Pragtical code editor."},a.createElement(d,null),a.createElement("main",null,a.createElement(c,null)))}},1207:(e,t,i)=>{i.d(t,{Z:()=>a});const a={heroBanner:"heroBanner_qdFl",buttons:"buttons_AeoN"}}}]);