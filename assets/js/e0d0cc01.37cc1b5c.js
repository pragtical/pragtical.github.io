"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5935],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>r});var c=s(96540);const i={},t=c.createContext(i);function l(e){const n=c.useContext(t);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),c.createElement(t.Provider,{value:n},e.children)}},49075:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>a});const c=JSON.parse('{"id":"api/core.contextmenu","title":"core.contextmenu","description":"A context menu.","source":"@site/docs/api/core.contextmenu.md","sourceDirName":"api","slug":"/api/core.contextmenu","permalink":"/docs/api/core.contextmenu","draft":false,"unlisted":false,"editUrl":"https://github.com/pragtical/pragtical.github.io/edit/main/docs/api/core.contextmenu.md","tags":[],"version":"current","sidebarPosition":24,"frontMatter":{"sidebar_position":24},"sidebar":"tutorialSidebar","previous":{"title":"core.config","permalink":"/docs/api/core.config"},"next":{"title":"core.dirwatch","permalink":"/docs/api/core.dirwatch"}}');var i=s(74848),t=s(28453);const l={sidebar_position:24},r="core.contextmenu",d={},a=[{value:"DIVIDER",id:"divider",level:2},{value:"__index",id:"__index",level:2},{value:"current_scale",id:"current_scale",level:2},{value:"height",id:"height",level:2},{value:"items",id:"items",level:2},{value:"move_towards",id:"move_towards",level:2},{value:"position",id:"position",level:2},{value:"selected",id:"selected",level:2},{value:"show_context_menu",id:"show_context_menu",level:2},{value:"super",id:"super",level:2},{value:"core.contextmenu.item",id:"corecontextmenuitem",level:2},{value:"command",id:"command",level:3},{value:"info",id:"info",level:3},{value:"text",id:"text",level:3},{value:"core.contextmenu.itemset",id:"corecontextmenuitemset",level:2},{value:"items",id:"items-1",level:3},{value:"predicate",id:"predicate",level:3},{value:"__call",id:"__call",level:2},{value:"__tostring",id:"__tostring",level:2},{value:"call_selected_item",id:"call_selected_item",level:2},{value:"draw",id:"draw",level:2},{value:"draw_context_menu",id:"draw_context_menu",level:2},{value:"each_item",id:"each_item",level:2},{value:"extend",id:"extend",level:2},{value:"extends",id:"extends",level:2},{value:"focus_next",id:"focus_next",level:2},{value:"focus_previous",id:"focus_previous",level:2},{value:"get_item_selected",id:"get_item_selected",level:2},{value:"hide",id:"hide",level:2},{value:"is",id:"is",level:2},{value:"is_class_of",id:"is_class_of",level:2},{value:"is_extended_by",id:"is_extended_by",level:2},{value:"new",id:"new",level:2},{value:"on_mouse_moved",id:"on_mouse_moved",level:2},{value:"on_mouse_pressed",id:"on_mouse_pressed",level:2},{value:"on_selected",id:"on_selected",level:2},{value:"register",id:"register",level:2},{value:"show",id:"show",level:2},{value:"update",id:"update",level:2}];function o(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"corecontextmenu",children:"core.contextmenu"})}),"\n",(0,i.jsx)(n.p,{children:"A context menu."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local contextmenu = require "core.contextmenu"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"divider",children:"DIVIDER"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) DIVIDER: table\n"})}),"\n",(0,i.jsx)(n.p,{children:"A unique value representing the divider in a context menu."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"__index",children:"__index"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) __index: core.object\n"})}),"\n",(0,i.jsx)(n.p,{children:"Base class providing OOP functionality for Lua.\nAll classes in Pragtical inherit from Object."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"current_scale",children:"current_scale"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) current_scale: number\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"height",children:"height"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) height: integer\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"items",children:"items"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) items: table\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"move_towards",children:"move_towards"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) move_towards: fun(self: table, k: string, dest: number, rate?: number, name?: string)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"position",children:"position"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) position: core.view.position\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"selected",children:"selected"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) selected: number\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"show_context_menu",children:"show_context_menu"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) show_context_menu: boolean\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"super",children:"super"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) super: core.object\n"})}),"\n",(0,i.jsx)(n.p,{children:"Base class providing OOP functionality for Lua.\nAll classes in Pragtical inherit from Object."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"corecontextmenuitem",children:"core.contextmenu.item"}),"\n",(0,i.jsx)(n.p,{children:"An item in the context menu."}),"\n",(0,i.jsx)(n.h3,{id:"command",children:"command"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) command: string|fun()\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"info",children:"info"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) info: string|nil\n"})}),"\n",(0,i.jsx)(n.p,{children:"If provided, this text is displayed on the right side of the menu."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"text",children:"text"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) text: string\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"corecontextmenuitemset",children:"core.contextmenu.itemset"}),"\n",(0,i.jsx)(n.p,{children:"A list of items with the same predicate."}),"\n",(0,i.jsx)(n.h3,{id:"items-1",children:"items"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) items: core.contextmenu.item[]\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"predicate",children:"predicate"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(field) predicate: string|core.object|fun(...any):boolean, ...unknown\n"})}),"\n",(0,i.jsx)(n.p,{children:"A predicate is a string, an Object or a function, that is used to determine\nwhether a command should be executed."}),"\n",(0,i.jsxs)(n.p,{children:["If the predicate is a string, it is resolved into an ",(0,i.jsx)(n.code,{children:"Object"})," via ",(0,i.jsx)(n.code,{children:"require()"}),"\nand checked against the active view with ",(0,i.jsx)(n.code,{children:"Object:extends()"}),".\nFor example, ",(0,i.jsx)(n.code,{children:'"core.docview"'})," will match any view that inherits from ",(0,i.jsx)(n.code,{children:"DocView"}),".\nA ",(0,i.jsx)(n.code,{children:"!"})," can be appended to the predicate to strictly match the current view via ",(0,i.jsx)(n.code,{children:"Object:is()"}),",\ninstead of matching any view that inherits the predicate."]}),"\n",(0,i.jsxs)(n.p,{children:["If the predicate is a table, it is checked against the active view with ",(0,i.jsx)(n.code,{children:"Object:extends()"}),".\nStrict matching via ",(0,i.jsx)(n.code,{children:"Object:is()"})," is not available."]}),"\n",(0,i.jsx)(n.p,{children:"If the predicate is a function, it must behave like a predicate function."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"__call",children:"__call"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.object:__call(...any)\n  -> obj: core.object\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Metamethod allowing class to be called like a constructor.\nEnables syntax: ",(0,i.jsx)(n.code,{children:"local obj = MyClass(args)"})," instead of ",(0,i.jsx)(n.code,{children:"MyClass:new(args)"}),"\nAutomatically creates instance and calls new() with provided arguments."]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," ",(0,i.jsx)(n.code,{children:"obj"})," \u2014 The new instance of the class"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"__tostring",children:"__tostring"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:__tostring()\n  -> string\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"call_selected_item",children:"call_selected_item"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:call_selected_item()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Hides the context menu and performs the command if an item is selected."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"draw",children:"draw"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:draw()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Draws the context menu."}),"\n",(0,i.jsxs)(n.p,{children:["This wraps ",(0,i.jsx)(n.code,{children:"ContextMenu:draw_context_menu()"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"draw_context_menu",children:"draw_context_menu"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:draw_context_menu()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Draws the context menu."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"each_item",children:"each_item"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:each_item()\n  -> fun():number, core.contextmenu.item, number, number, number, number\n"})}),"\n",(0,i.jsx)(n.p,{children:"Returns an iterator that iterates over each context menu item and their dimensions."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"extend",children:"extend"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.object:extend()\n  -> cls: core.object\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Create a new class that inherits from this one.\nReturns a new class with this class as its parent.\nExample: ",(0,i.jsx)(n.code,{children:"local MyClass = Object:extend()"})]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," ",(0,i.jsx)(n.code,{children:"cls"})," \u2014 The new class table"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"extends",children:"extends"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.object:extends(T: any)\n  -> extends: boolean\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Check if object inherits from the given type (inheritance-aware).\nUse this to check class hierarchy.\nExample: ",(0,i.jsx)(n.code,{children:"view:extends(View)"})," returns true for View and all subclasses"]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"param"})," ",(0,i.jsx)(n.code,{children:"T"})," \u2014 Class to check inheritance from"]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," ",(0,i.jsx)(n.code,{children:"extends"})," \u2014 True if object is T or inherits from T"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"focus_next",children:"focus_next"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:focus_next()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Selects the next item."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"focus_previous",children:"focus_previous"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:focus_previous()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Selects the the previous item."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"get_item_selected",children:"get_item_selected"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:get_item_selected()\n  -> core.contextmenu.item|nil\n"})}),"\n",(0,i.jsx)(n.p,{children:"Gets the currently selected item."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"hide",children:"hide"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:hide()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Hides the context menu."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"is",children:"is"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.object:is(T: any)\n  -> is_exact: boolean\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Check if object is exactly of the given type (no inheritance check).\nUse this for strict type matching.\nExample: ",(0,i.jsx)(n.code,{children:"view:is(DocView)"})," returns true only if view is a DocView, not a subclass"]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"param"})," ",(0,i.jsx)(n.code,{children:"T"})," \u2014 Class to check against"]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," ",(0,i.jsx)(n.code,{children:"is_exact"})," \u2014 True if object is exactly type T"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"is_class_of",children:"is_class_of"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.object:is_class_of(T: any)\n  -> is_instance: boolean\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Check if the given object is exactly an instance of this class.\nInverse of is() - checks if T is an instance of self.\nExample: ",(0,i.jsx)(n.code,{children:"DocView:is_class_of(obj)"})," checks if obj is exactly a DocView"]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"param"})," ",(0,i.jsx)(n.code,{children:"T"})," \u2014 Object to check"]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," ",(0,i.jsx)(n.code,{children:"is_instance"})," \u2014 True if T is exactly an instance of this class"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"is_extended_by",children:"is_extended_by"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.object:is_extended_by(T: any)\n  -> is_extended: boolean\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Check if the given object/class inherits from this class.\nInverse of extends() - checks if T is a subclass of self.\nExample: ",(0,i.jsx)(n.code,{children:"View:is_extended_by(DocView)"})," checks if DocView inherits from View"]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"param"})," ",(0,i.jsx)(n.code,{children:"T"})," \u2014 Object or class to check"]}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," ",(0,i.jsx)(n.code,{children:"is_extended"})," \u2014 True if T inherits from this class"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:new()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Creates a new context menu."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"on_mouse_moved",children:"on_mouse_moved"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:on_mouse_moved(px: any, py: any)\n  -> boolean\n"})}),"\n",(0,i.jsx)(n.p,{children:"Event handler for mouse movements."}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," \u2014 true if the event is caught."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"on_mouse_pressed",children:"on_mouse_pressed"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:on_mouse_pressed(button: 'left'|'right', px: number, py: number, clicks: number)\n  -> boolean\n"})}),"\n",(0,i.jsx)(n.p,{children:"Event handler for mouse press."}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," \u2014 true if the event is caught."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"button:\n    | 'left'\n    | 'right'\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"on_selected",children:"on_selected"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:on_selected(item: core.contextmenu.item)\n"})}),"\n",(0,i.jsx)(n.p,{children:"Event handler for when the selection is confirmed."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"register",children:"register"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:register(predicate: string|core.object|fun(...any):boolean, ...unknown, items: core.contextmenu.item[])\n"})}),"\n",(0,i.jsx)(n.p,{children:"Registers a list of items into the context menu with a predicate."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"show",children:"show"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:show(x: number, y: number)\n  -> boolean\n"})}),"\n",(0,i.jsx)(n.p,{children:"Shows the context menu."}),"\n",(0,i.jsxs)(n.p,{children:["@",(0,i.jsx)(n.em,{children:"return"})," \u2014 If true, the context menu is shown."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"update",children:"update"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"(method) core.contextmenu:update()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Event handler for content update."}),"\n",(0,i.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);