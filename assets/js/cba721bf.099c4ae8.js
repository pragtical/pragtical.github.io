"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6391],{28453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>c});var r=a(96540);const s={},i=r.createContext(s);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(i.Provider,{value:n},e.children)}},72433:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"api/canvas","title":"canvas","description":"Core functionality that allows rendering into a separate surface.","source":"@site/docs/api/canvas.md","sourceDirName":"api","slug":"/api/canvas","permalink":"/docs/api/canvas","draft":false,"unlisted":false,"editUrl":"https://github.com/pragtical/pragtical.github.io/edit/main/docs/api/canvas.md","tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"sidebar_position":17},"sidebar":"tutorialSidebar","previous":{"title":"utf8extra","permalink":"/docs/api/utf8extra"},"next":{"title":"core","permalink":"/docs/api/core"}}');var s=a(74848),i=a(28453);const l={sidebar_position:17},c="canvas",t={},d=[{value:"canvas.scale_mode",id:"canvasscale_mode",level:2},{value:"load_image",id:"load_image",level:2},{value:"load_svg_image",id:"load_svg_image",level:2},{value:"new",id:"new",level:2},{value:"clear",id:"clear",level:2},{value:"copy",id:"copy",level:2},{value:"draw_canvas",id:"draw_canvas",level:2},{value:"draw_poly",id:"draw_poly",level:2},{value:"draw_rect",id:"draw_rect",level:2},{value:"draw_text",id:"draw_text",level:2},{value:"get_pixels",id:"get_pixels",level:2},{value:"get_size",id:"get_size",level:2},{value:"render",id:"render",level:2},{value:"save_image",id:"save_image",level:2},{value:"scaled",id:"scaled",level:2},{value:"set_clip_rect",id:"set_clip_rect",level:2},{value:"set_pixels",id:"set_pixels",level:2}];function o(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"canvas",children:"canvas"})}),"\n",(0,s.jsx)(n.p,{children:"Core functionality that allows rendering into a separate surface."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local canvas = require "canvas"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"canvasscale_mode",children:"canvas.scale_mode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'canvas.scale_mode:\n    | "linear"\n    | "nearest"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"load_image",children:"load_image"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function canvas.load_image(path: string)\n  -> canvas: canvas?\n  2. errmsg: string?\n"})}),"\n",(0,s.jsx)(n.p,{children:"Loads an image into a new canvas."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"load_svg_image",children:"load_svg_image"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function canvas.load_svg_image(path: string, width: integer, height: integer)\n  -> canvas: canvas?\n  2. errmsg: string?\n"})}),"\n",(0,s.jsx)(n.p,{children:"Loads an svg image with the specified width and height."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"new",children:"new"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function canvas.new(width: integer, height: integer, color: renderer.color, transparent?: boolean)\n  -> canvas\n"})}),"\n",(0,s.jsx)(n.p,{children:"Creates a new canvas."}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"param"})," ",(0,s.jsx)(n.code,{children:"color"})," \u2014 Background color to initialize the Canvas with"]}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"param"})," ",(0,s.jsx)(n.code,{children:"transparent"})," \u2014 Make the canvas transparent"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"clear",children:"clear"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:clear(color?: renderer.color)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Clean the canvas, content will be replaced with transparent pixels,\nor a full opaque color if the canvas is not transparent."}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"param"})," ",(0,s.jsx)(n.code,{children:"color"})," \u2014 Optional color used to fill the surface."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"copy",children:"copy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'(method) canvas:copy(x?: integer, y?: integer, width?: integer, height?: integer, new_width?: integer, new_height?: integer, scale_mode?: "linear"|"nearest")\n  -> copied_canvas: canvas\n'})}),"\n",(0,s.jsx)(n.p,{children:"Copies (a part of) the Canvas in a new Canvas."}),"\n",(0,s.jsx)(n.p,{children:"If no arguments are passed, the Canvas is duplicated as-is."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"new_width"})," and ",(0,s.jsx)(n.code,{children:"new_height"})," specify the new size of the copied region."]}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"return"})," ",(0,s.jsx)(n.code,{children:"copied_canvas"})," \u2014 A copy of the Canvas"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'scale_mode:\n    | "linear"\n    | "nearest"\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"draw_canvas",children:"draw_canvas"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:draw_canvas(canvas: canvas, x: integer, y: integer, blend: boolean)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Draw a Canvas."}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"param"})," ",(0,s.jsx)(n.code,{children:"blend"})," \u2014 Whether to blend the Canvas, or replace the pixels"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"draw_poly",children:"draw_poly"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:draw_poly(poly: integer[][], color: renderer.color)\n  -> x: number\n  2. y: number\n  3. w: number\n  4. h: number\n"})}),"\n",(0,s.jsx)(n.p,{children:"Draws a filled polygon, consisting of curves and points.\nThe polygon is filled using the non-zero winding rule in clockwise direction."}),"\n",(0,s.jsx)(n.p,{children:"The function returns the control box of the polygon,\nwhich is greater than or equal to the dimensions of the rendered polygon.\nIt is not guaranteed to the exact dimension of the rendered polygon."}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"param"})," ",(0,s.jsx)(n.code,{children:"poly"})," \u2014 the lines or curves to draw, up to 65535 points."]}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"return"})," ",(0,s.jsx)(n.code,{children:"x"})," \u2014 the X coordinate of top left corner of the control box."]}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"return"})," ",(0,s.jsx)(n.code,{children:"y"})," \u2014 the Y coordinate of the top left corner of the control box."]}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"return"})," ",(0,s.jsx)(n.code,{children:"w"})," \u2014 the width of the control box."]}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"return"})," ",(0,s.jsx)(n.code,{children:"h"})," \u2014 the height of the control box."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"draw_rect",children:"draw_rect"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:draw_rect(x: integer, y: integer, width: integer, height: integer, color: renderer.color, replace: boolean)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Draw a rectangle."}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"param"})," ",(0,s.jsx)(n.code,{children:"replace"})," \u2014 Overwrite the content with the specified color. Useful when dealing with alpha."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"draw_text",children:"draw_text"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:draw_text(font: renderer.font, text: string, x: number, y: integer, color: renderer.color, tab_data?: renderer.tab_data)\n  -> x: number\n"})}),"\n",(0,s.jsx)(n.p,{children:"Draw text and return the x coordinate where the text finished drawing."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"get_pixels",children:"get_pixels"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:get_pixels(pixels: any, x?: integer, y?: integer, width?: integer, height?: integer)\n  -> pixels: string\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the pixels of the specified portion of the Canvas."}),"\n",(0,s.jsx)(n.p,{children:"If the coordinates are not specified, the whole Canvas is considered.\nThe pixel format is RGBA32."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"get_size",children:"get_size"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:get_size()\n  -> w: integer\n  2. h: integer\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the Canvas size."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"render",children:"render"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:render()\n"})}),"\n",(0,s.jsx)(n.p,{children:"Explicitly render all the draw commands sent to the canvas so far\nwithout having to render the canvas into a window first."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"save_image",children:"save_image"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'(method) canvas:save_image(filename: string, type?: "avif"|"jpg"|"png", quality?: integer)\n  -> saved: boolean\n  2. errmsg: string?\n'})}),"\n",(0,s.jsx)(n.p,{children:"Save the current canvas as an image."}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"param"})," ",(0,s.jsx)(n.code,{children:"type"}),' \u2014 Defaults to "png"']}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"param"})," ",(0,s.jsx)(n.code,{children:"quality"})," \u2014 A number from 1 to 100 used for jpg and avif. Defaults to 100"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'type:\n    | "png"\n    | "jpg"\n    | "avif"\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"scaled",children:"scaled"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'(method) canvas:scaled(new_width: integer, new_height: integer, scale_mode: "linear"|"nearest")\n  -> scaled_canvas: canvas\n'})}),"\n",(0,s.jsx)(n.p,{children:"Returns a scaled copy of the Canvas."}),"\n",(0,s.jsxs)(n.p,{children:["@",(0,s.jsx)(n.em,{children:"return"})," ",(0,s.jsx)(n.code,{children:"scaled_canvas"})," \u2014 A scaled copy of the Canvas"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'scale_mode:\n    | "linear"\n    | "nearest"\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"set_clip_rect",children:"set_clip_rect"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:set_clip_rect(x: integer, y: integer, width: integer, height: integer)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Set the region of the Canvas where draw operations will take effect."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"set_pixels",children:"set_pixels"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"(method) canvas:set_pixels(pixels: string, x: integer, y: integer, width: integer, height: integer)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Overwrites the pixels of the Canvas with the specified ones."}),"\n",(0,s.jsxs)(n.p,{children:["The pixel format ",(0,s.jsx)(n.em,{children:"must be"})," RGBA32."]}),"\n",(0,s.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);