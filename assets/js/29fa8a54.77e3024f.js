"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1113],{224:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"developer-guide/core-ui-architecture","title":"Core UI Architecture","description":"An introduction about Pragtical\'s concepts and how they tie in to plugin development.","source":"@site/docs/developer-guide/core-ui-architecture.md","sourceDirName":"developer-guide","slug":"/developer-guide/core-ui-architecture","permalink":"/docs/developer-guide/core-ui-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/pragtical/pragtical.github.io/edit/main/docs/developer-guide/core-ui-architecture.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"description":"An introduction about Pragtical\'s concepts and how they tie in to plugin development."},"sidebar":"tutorialSidebar","previous":{"title":"Quick Start","permalink":"/docs/developer-guide/quick-start"},"next":{"title":"Syntaxes and Themes","permalink":"/docs/category/syntaxes-and-themes"}}');var l=i(74848),o=i(28453);const r={sidebar_position:2,description:"An introduction about Pragtical's concepts and how they tie in to plugin development."},c="Core UI Architecture",t={},d=[{value:"Overview",id:"overview",level:2},{value:"Object System",id:"object-system",level:2},{value:"Usage",id:"usage",level:3},{value:"Key Methods",id:"key-methods",level:3},{value:"View System",id:"view-system",level:2},{value:"Key Properties",id:"key-properties",level:3},{value:"Lifecycle Methods",id:"lifecycle-methods",level:3},{value:"Event Handlers",id:"event-handlers",level:3},{value:"Animation",id:"animation",level:3},{value:"Creating a Custom View",id:"creating-a-custom-view",level:3},{value:"Node System",id:"node-system",level:2},{value:"Node Types",id:"node-types",level:3},{value:"Key Properties",id:"key-properties-1",level:3},{value:"Key Methods",id:"key-methods-1",level:3},{value:"Usage",id:"usage-1",level:3},{value:"RootView",id:"rootview",level:2},{value:"Key Methods",id:"key-methods-2",level:3},{value:"Event Flow",id:"event-flow",level:3},{value:"DocView",id:"docview",level:2},{value:"Features",id:"features",level:3},{value:"Key Methods",id:"key-methods-3",level:3},{value:"Common View Implementations",id:"common-view-implementations",level:2},{value:"Architecture Diagram",id:"architecture-diagram",level:2},{value:"Update/Draw Cycle",id:"updatedraw-cycle",level:2},{value:"Context System",id:"context-system",level:2},{value:"Mouse Grab Pattern",id:"mouse-grab-pattern",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Coordinate Systems",id:"coordinate-systems",level:3},{value:"Notes",id:"notes",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"core-ui-architecture",children:"Core UI Architecture"})}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"Pragtical's UI is built on four core components that work together:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Object"})," - OOP foundation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"View"})," - UI component base class"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Node"})," - Layout and container management"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"RootView"})," - Top-level coordinator"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"object-system",children:"Object System"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File:"})," ",(0,l.jsx)(n.code,{children:"data/core/object.lua"})]}),"\n",(0,l.jsx)(n.p,{children:"Provides class-based inheritance for Lua."}),"\n",(0,l.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local Object = require "core.object"\nlocal MyClass = Object:extend()\n\nfunction MyClass:new(param) \n  -- `super` is a reference to the parent class, in this case `Object`\n  -- IMPORTANT: Call super constructor first, use . instead of : and pass\n  -- self explicitly, forgetting this call is a common mistake\n  -- that can lead to uninitialized state and unexpected behavior\n  MyClass.super.new(self)\n  self.value = param\nend\n\nfunction MyClass:method()\n  return self.value\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"key-methods",children:"Key Methods"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Object:extend()"})," - Create a subclass"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Object:new(...)"})," - Constructor (override this)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Object:is(Type)"})," - Check exact type"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Object:extends(Type)"})," - Check inheritance"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"view-system",children:"View System"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File:"})," ",(0,l.jsx)(n.code,{children:"data/core/view.lua"})]}),"\n",(0,l.jsx)(n.p,{children:"Base class for all UI components. Handles position, size, scrolling, events, and drawing."}),"\n",(0,l.jsx)(n.h3,{id:"key-properties",children:"Key Properties"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'{\n  position = { x, y },\n  size = { x, y },\n  scroll = { x, y, to = { x, y } },\n  scrollable = boolean,\n  cursor = "arrow" | "ibeam" | "sizeh" | "sizev" | "hand",\n  context = "application" | "session"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"lifecycle-methods",children:"Lifecycle Methods"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"View:new()"})," - Constructor"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"View:update()"})," - Called each time a keyboard, mouse, resize event, etc... occurs, or core.redraw is set to true and the frames per second has not been exceeded"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"View:draw()"})," - Render the view"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"View:try_close(do_close)"})," - Handle close request"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"event-handlers",children:"Event Handlers"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"View:on_mouse_pressed(button, x, y, clicks)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"View:on_mouse_released(button, x, y)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"View:on_mouse_moved(x, y, dx, dy)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"View:on_mouse_wheel(y, x)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"View:on_text_input(text)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"View:on_file_dropped(filename, x, y)"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"animation",children:"Animation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Smoothly animate values\nself:move_towards(self.scroll, "y", target_y, 0.3)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"creating-a-custom-view",children:"Creating a Custom View"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local View = require "core.view"\nlocal MyView = View:extend()\n\nfunction MyView:new()\n  MyView.super.new(self)\n  self.scrollable = true\nend\n\nfunction MyView:draw()\n  self:draw_background(style.background)\n  -- Custom drawing here\n  self:draw_scrollbar()\nend\n\nfunction MyView:on_mouse_pressed(button, x, y, clicks)\n  -- Handle input\n  return true  -- Consume event\nend\n'})}),"\n",(0,l.jsx)(n.h2,{id:"node-system",children:"Node System"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File:"})," ",(0,l.jsx)(n.code,{children:"data/core/node.lua"})]}),"\n",(0,l.jsx)(n.p,{children:"Manages layout using a tree structure. Nodes can contain views (tabs) or split into child nodes."}),"\n",(0,l.jsx)(n.h3,{id:"node-types",children:"Node Types"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'"leaf"'})," - Contains views as tabs"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'"hsplit"'})," - Horizontal split (left/right)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'"vsplit"'})," - Vertical split (top/bottom)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"key-properties-1",children:"Key Properties"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'{\n  type = "leaf" | "hsplit" | "vsplit",\n  views = {},           -- Array of views (leaf nodes)\n  active_view = View,   -- Currently active tab\n  divider = 0.5,        -- Split ratio (0-1)\n  a, b = Node, Node,    -- Child nodes (splits)\n  locked = {x, y},      -- Fixed dimensions\n  resizable = boolean\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"key-methods-1",children:"Key Methods"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Node:split(direction, view)"})," - Split node and add view","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Direction: ",(0,l.jsx)(n.code,{children:'"left"'}),", ",(0,l.jsx)(n.code,{children:'"right"'}),", ",(0,l.jsx)(n.code,{children:'"up"'}),", ",(0,l.jsx)(n.code,{children:'"down"'})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Node:add_view(view, idx)"})," - Add view as tab"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Node:remove_view(root, view)"})," - Remove view"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Node:set_active_view(view)"})," - Switch active tab"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Node:get_node_for_view(view)"})," - Find containing node"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"usage-1",children:"Usage"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Get active node\nlocal node = core.root_view:get_active_node()\n\n-- Add view as tab\nnode:add_view(MyView())\n\n-- Split and add view\nnode:split("right", MyView())\n'})}),"\n",(0,l.jsx)(n.h2,{id:"rootview",children:"RootView"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File:"})," ",(0,l.jsx)(n.code,{children:"data/core/rootview.lua"})]}),"\n",(0,l.jsx)(n.p,{children:"Top-level view that manages the entire UI. Routes events and handles global operations."}),"\n",(0,l.jsx)(n.h3,{id:"key-methods-2",children:"Key Methods"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RootView:get_active_node()"})," - Node with focus"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RootView:get_primary_node()"})," - Main document area"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RootView:open_doc(doc)"})," - Open document"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RootView:grab_mouse(button, view)"})," - Capture mouse input"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RootView:ungrab_mouse(button)"})," - Release capture"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"event-flow",children:"Event Flow"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"OS Event\n  \u2192 RootView (routes to node/view under mouse)\n    \u2192 Node (delegates to active view)\n      \u2192 View (handles or returns false)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"docview",children:"DocView"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File:"})," ",(0,l.jsx)(n.code,{children:"data/core/docview.lua"})]}),"\n",(0,l.jsx)(n.p,{children:"The text editor view. Most complex view implementation."}),"\n",(0,l.jsx)(n.h3,{id:"features",children:"Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Syntax highlighting"}),"\n",(0,l.jsx)(n.li,{children:"Multiple cursors"}),"\n",(0,l.jsx)(n.li,{children:"Line numbers gutter"}),"\n",(0,l.jsx)(n.li,{children:"Horizontal and vertical scrolling"}),"\n",(0,l.jsx)(n.li,{children:"IME support"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"key-methods-3",children:"Key Methods"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DocView:get_line_screen_position(line, col)"})," - Doc to screen coords"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DocView:resolve_screen_position(x, y)"})," - Screen to doc coords"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DocView:scroll_to_line(line)"})," - Scroll to line"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DocView:scroll_to_make_visible(line, col)"})," - Ensure visible"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"common-view-implementations",children:"Common View Implementations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"EmptyView"})," (",(0,l.jsx)(n.code,{children:"data/core/emptyview.lua"}),") - Welcome screen"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"StatusView"})," (",(0,l.jsx)(n.code,{children:"data/core/statusview.lua"}),") - Status bar"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CommandView"})," (",(0,l.jsx)(n.code,{children:"data/core/commandview.lua"}),") - Command palette"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"LogView"})," (",(0,l.jsx)(n.code,{children:"data/core/logview.lua"}),") - Log viewer"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"NagView"})," (",(0,l.jsx)(n.code,{children:"data/core/nagview.lua"}),") - Dialogs/modals"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"TitleView"})," (",(0,l.jsx)(n.code,{children:"data/core/titleview.lua"}),") - Title bar"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"TreeView"})," (",(0,l.jsx)(n.code,{children:"data/plugins/treeview.lua"}),") - File tree sidebar"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"architecture-diagram",children:"Architecture Diagram"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Object (OOP base)\n  \u2502\n  \u2514\u2500 View (UI component)\n      \u251c\u2500 RootView (coordinator)\n      \u251c\u2500 DocView (text editor)\n      \u251c\u2500 StatusView\n      \u251c\u2500 EmptyView\n      \u2514\u2500 ...\n\nNode Tree (layout):\n  RootView.root_node\n    \u251c\u2500 Node (hsplit)\n    \u2502   \u251c\u2500 Node (leaf) \u2192 [View1, View2]  # Tabs\n    \u2502   \u2514\u2500 Node (vsplit)\n    \u2502       \u251c\u2500 Node (leaf) \u2192 [View3]\n    \u2502       \u2514\u2500 Node (leaf) \u2192 [View4]\n"})}),"\n",(0,l.jsx)(n.h2,{id:"updatedraw-cycle",children:"Update/Draw Cycle"}),"\n",(0,l.jsx)(n.p,{children:"Every frame (typically 60 FPS):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"1. Update Phase:\n   RootView:update()\n     \u2514\u2500 Node:update() (recursive)\n         \u2514\u2500 View:update()\n\n2. Draw Phase:\n   RootView:draw()\n     \u2514\u2500 Node:draw() (recursive)\n         \u2514\u2500 View:draw()\n"})}),"\n",(0,l.jsx)(n.h2,{id:"context-system",children:"Context System"}),"\n",(0,l.jsxs)(n.p,{children:["Views have a ",(0,l.jsx)(n.code,{children:"context"})," property:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'"application"'})," - Persists across sessions (toolbar, status bar)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'"session"'})," - Tied to project (document views, tree view)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["When closing a project, only ",(0,l.jsx)(n.code,{children:'"session"'})," context views are closed."]}),"\n",(0,l.jsx)(n.h2,{id:"mouse-grab-pattern",children:"Mouse Grab Pattern"}),"\n",(0,l.jsx)(n.p,{children:"For drag operations, views can capture mouse input:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function MyView:on_mouse_pressed(button, x, y, clicks)\n  core.root_view:grab_mouse("left", self)\n  return true\nend\n\nfunction MyView:on_mouse_released(button, x, y)\n  core.root_view:ungrab_mouse("left")\n  return true\nend\n\n-- While grabbed, all mouse events go to this view\n'})}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Always call super methods"})," when overriding"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function MyView:update()\n  MyView.super.update(self)\n  -- Your update logic\nend\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Use move_towards for animations"})," instead of direct assignment"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'self:move_towards(self.scroll, "y", target, 0.3)\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Return true from event handlers"})," to consume events"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function MyView:on_mouse_pressed(...)\n  -- Handle event\n  return true  -- Prevent event propagation\nend\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Draw background and scrollbar"})," in custom views"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function MyView:draw()\n  self:draw_background(style.background)\n  -- Content\n  self:draw_scrollbar()\nend\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Set scrollable property"})," if view needs scrolling"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function MyView:new()\n  MyView.super.new(self)\n  self.scrollable = true\nend\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"coordinate-systems",children:"Coordinate Systems"}),"\n",(0,l.jsx)(n.p,{children:"When working with positions, be aware of different coordinate spaces:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Screen coordinates"}),": Absolute pixel positions in the window (e.g., mouse x, y)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Content coordinates"}),": Positions relative to view content, accounting for scroll offset"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Document coordinates"}),": Line and column positions in text (e.g., line 5, column 10)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Conversion methods:"})}),"\n",(0,l.jsx)(n.p,{children:"Screen \u2194 Document:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DocView:resolve_screen_position(x, y)"})," \u2192 ",(0,l.jsx)(n.code,{children:"(line, col)"})," - Convert screen pixels to document position"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DocView:get_line_screen_position(line, col)"})," \u2192 ",(0,l.jsx)(n.code,{children:"(x, y)"})," - Convert document position to screen pixels"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Content offset helpers:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"View:get_content_offset()"})," \u2192 ",(0,l.jsx)(n.code,{children:"(x, y)"})," - Get top-left corner of content area in screen coordinates (accounts for scroll)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"View:get_content_bounds()"})," \u2192 ",(0,l.jsx)(n.code,{children:"(x1, y1, x2, y2)"})," - Get visible content rectangle in content coordinates"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Document column \u2194 X offset within line:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DocView:get_col_x_offset(line, col)"})," \u2192 ",(0,l.jsx)(n.code,{children:"xoffset"})," - Get horizontal pixel offset for a column position"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DocView:get_x_offset_col(line, x)"})," \u2192 ",(0,l.jsx)(n.code,{children:"col"})," - Get column position from horizontal pixel offset"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Variable FPS"})," To lower cpu usage, the editor does not run at a constant FPS. The configured ",(0,l.jsx)(n.code,{children:"config.fps"})," is basically the maximum allowed frames per second. Pragtical also prevents calling the update and draw methods of views when they aren't visible (by checking if their size is 0) to save cpu cycles. Pragtical implements cached rendering in C which skips draw commands for parts of the UI that have not changed  (and for the most part those that go beyond the viewable area)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Line Caching"}),": DocView implements column-to-x-offset caching for lines longer than 500 characters (defined by ",(0,l.jsx)(n.code,{children:"CACHE_LINE_LEN"}),"). This significantly improves performance on extremely long lines."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Visible Range Optimization"}),": Views only draw and update content that's visible on screen. Use ",(0,l.jsx)(n.code,{children:"DocView:get_visible_line_range()"})," and ",(0,l.jsx)(n.code,{children:"DocView:get_visible_cols_range()"})," when implementing plugins that process document content."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Font Tab Size"}),": When working with fonts, remember to call ",(0,l.jsx)(n.code,{children:"font:set_tab_size(indent_size)"})," to ensure proper tab rendering. DocView handles this automatically for syntax highlighting."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Debugging Tips"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Enable development tools in Settings \u2192 Development to see:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Current FPS and frame timing"}),"\n",(0,l.jsx)(n.li,{children:"Repainted screen regions"}),"\n",(0,l.jsx)(n.li,{children:"View boundaries and clipping rectangle"}),"\n",(0,l.jsx)(n.li,{children:"Log slow coroutines"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"core.log()"})," or ",(0,l.jsx)(n.code,{children:"core.error()"})," for logging (visible in LogView)"]}),"\n",(0,l.jsxs)(n.li,{children:["Check ",(0,l.jsx)(n.code,{children:"core.active_view"})," to verify which view has focus"]}),"\n",(0,l.jsxs)(n.li,{children:["Inspect ",(0,l.jsx)(n.code,{children:"core.root_view.root_node"})," tree structure when debugging layout issue"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(96540);const l={},o=s.createContext(l);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);